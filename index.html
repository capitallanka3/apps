<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="UTF-8">
  <title>ලියාපදිංචි වීමේ පෝරමය</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f8f8f8; }
    label { display: block; margin-top: 10px; font-weight: bold; }
    input, select { width: 100%; padding: 8px; margin-top: 5px; }
    button { margin-top: 20px; padding: 10px 20px; font-size: 16px; cursor: pointer; }
    h2 { text-align: center; }
  </style>
</head>
<body>

  <h2>ලියාපදිංචි වීමේ පෝරමය | Registration Form</h2>

  <form id="registrationForm">
    <!-- Personal Details -->
    <label>මුල් නම | First Name:
      <input type="text" name="first_name" required>
    </label>
    <label>අවසන් නම | Last Name:
      <input type="text" name="last_name" required>
    </label>
    <label>උපන්දිනය | Date of Birth:
      <input type="date" name="dob" required>
    </label>
    <label>ජා.හැ.අංකය | NIC Number:
      <input type="text" name="nic" required>
    </label>
    <label>විවාහක තත්වය | Marital Status:
      <select name="marital_status" required>
        <option value="">තෝරන්න | Select</option>
        <option value="විවාහක">විවාහක | Married</option>
        <option value="අවිවාහක">අවිවාහක | Unmarried</option>
      </select>
    </label>

    <!-- Guarantors -->
    <label>ඇපකරු 1 නම | Guarantor 1 Name:
      <input type="text" name="guarantor1_name" required>
    </label>
    <label>ඇපකරු 1 දුරකථනය | Guarantor 1 Phone:
      <input type="text" name="guarantor1_phone" required>
    </label>
    <label>ඇපකරු 2 නම | Guarantor 2 Name:
      <input type="text" name="guarantor2_name" required>
    </label>
    <label>ඇපකරු 2 දුරකථනය | Guarantor 2 Phone:
      <input type="text" name="guarantor2_phone" required>
    </label>

    <!-- Bank Info -->
    <label>ගිණුම් හිමියාගේ නම | Account Holder Name:
      <input type="text" name="account_holder" required>
    </label>
    <label>ගිණුම් අංකය | Account Number:
      <input type="text" name="account_number" required>
    </label>
    <label>බැංකුව | Bank:
      <input type="text" name="bank" required>
    </label>
    <label>ශාඛාව | Branch:
      <input type="text" name="branch" required>
    </label>

    <button type="button" onclick="submitForm()">යවන්න | Submit</button>
  </form>

  <script>
    function submitForm() {
      const form = document.getElementById("registrationForm");
      const formData = {
        first_name: form.first_name.value,
        last_name: form.last_name.value,
        dob: form.dob.value,
        nic: form.nic.value,
        marital_status: form.marital_status.value,
        guarantor1_name: form.guarantor1_name.value,
        guarantor1_phone: form.guarantor1_phone.value,
        guarantor2_name: form.guarantor2_name.value,
        guarantor2_phone: form.guarantor2_phone.value,
        account_holder: form.account_holder.value,
        account_number: form.account_number.value,
        bank: form.bank.value,
        branch: form.branch.value
      };

      fetch(https://script.google.com/macros/s/AKfycbwEe8dBcGeLLCn6ltCEiah_SFiuRgo4PZrCEsBsfNZoNPoc2tjz9pabSOts2SJVzzC7tw/exec", {
        method: "POST",
        body: JSON.stringify(formData),
        headers: {
          "Content-Type": "application/json"
        }
      })
      .then(res => res.text())
      .then(data => {
        alert("යැවීම සාර්ථකයි: " + data);
        form.reset();
      })
      .catch(err => {
        console.error("Submit Error:", err);
        alert("යැවීම අසාර්ථකයි");
      });
    }
  </script>

</body>
</html>
