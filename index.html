<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="UTF-8">
  <title>පොදුගලික තොරතුරු</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    label { display: block; margin-top: 10px; }
    input, select { width: 100%; padding: 8px; margin-top: 5px; }
    button { margin-top: 20px; padding: 10px 20px; }
  </style>
</head>
<body>

  <h2>ලියාපදිංචි වීමේ පෝරමය</h2>

  <form id="registrationForm">
    <!-- Step 1 -->
    <label>මුල් නම:
      <input type="text" name="first_name" required>
    </label>
    <label>මුල් නම (අවසාන් නම):
      <input type="text" name="last_name" required>
    </label>
    <label>උපන්දිනය:
      <input type="date" name="dob" required>
    </label>
    <label>ජා.හැ.අංකය:
      <input type="text" name="nic" required>
    </label>
    <label>විවාහක/අවිවාහක තත්වය:
      <select name="marital_status" required>
        <option value="">තෝරන්න</option>
        <option value="විවාහක">විවාහක</option>
        <option value="අවිවාහක">අවිවාහක</option>
      </select>
    </label>

    <!-- Step 2 -->
    <label>ඇපකරු 1 නම:
      <input type="text" name="guarantor1_name" required>
    </label>
    <label>ඇපකරු 1 දුරකථනය:
      <input type="text" name="guarantor1_phone" required>
    </label>
    <label>ඇපකරු 2 නම:
      <input type="text" name="guarantor2_name" required>
    </label>
    <label>ඇපකරු 2 දුරකථනය:
      <input type="text" name="guarantor2_phone" required>
    </label>

    <!-- Step 4 -->
    <label>ගිණුම් හිමියාගේ නම:
      <input type="text" name="account_holder" required>
    </label>
    <label>ගිණුම් අංකය:
      <input type="text" name="account_number" required>
    </label>
    <label>බැංකුව:
      <input type="text" name="bank" required>
    </label>
    <label>ශාඛාව:
      <input type="text" name="branch" required>
    </label>

    <button type="button" onclick="submitForm()">යවන්න</button>
  </form>

  <script>
    function submitForm() {
      const form = document.getElementById("registrationForm");
      const formData = {
        first_name: form.first_name.value,
        last_name: form.last_name.value,
        dob: form.dob.value,
        nic: form.nic.value,
        marital_status: form.marital_status.value,
        guarantor1_name: form.guarantor1_name.value,
        guarantor1_phone: form.guarantor1_phone.value,
        guarantor2_name: form.guarantor2_name.value,
        guarantor2_phone: form.guarantor2_phone.value,
        account_holder: form.account_holder.value,
        account_number: form.account_number.value,
        bank: form.bank.value,
        branch: form.branch.value
      };

      fetch("https://script.google.com/macros/s/AKfycbw35oJ6oHjYFOvuFLYbdjNYcs_yXErKGLM6-LkpAHbYOAW93jLOQJ3t-1oxkRtsB2EJ/exec", {
        method: "POST",
        body: JSON.stringify(formData),
        headers: {
          "Content-Type": "application/json"
        }
      })
      .then(res => res.text())
      .then(data => {
        alert("යැවීම සාර්ථකයි: " + data);
        form.reset(); // clear form
      })
      .catch(err => {
        console.error("Submit Error:", err);
        alert("යැවීම අසාර්ථකයි");
      });
    }
  </script>

</body>
</html>
